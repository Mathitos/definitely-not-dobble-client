(this["webpackJsonpdefinitely-not-dobble-client"]=this["webpackJsonpdefinitely-not-dobble-client"]||[]).push([[0],{27:function(e,n,t){e.exports=t(43)},33:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);t(28);var a=t(0),r=t.n(a),o=t(16),c=t(17),u=t(18),l=t(25),i=t(19),s=t(26),m=t(10),f=t(6),d=t(13),b=t(5),g=(t(33),function(){var e=Object(a.useState)({name:"",room:""}),n=Object(b.a)(e,2),t=n[0],o=n[1],c=Object(f.f)();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.name&&t.room&&c.push({pathname:"/dobble",search:"?"+new URLSearchParams({name:t.name,room:t.room}).toString()})},className:"login-form"},r.a.createElement("label",null,r.a.createElement("span",null,"Seu Nome:"),r.a.createElement("input",{value:t.name,onChange:function(e){var n=e.target.value;o(Object(d.a)({},t,{name:n}))}})," "),r.a.createElement("label",null,r.a.createElement("span",null,"Nome da Sala:"),r.a.createElement("input",{value:t.room,onChange:function(e){var n=e.target.value;o(Object(d.a)({},t,{room:n}))}})),r.a.createElement("button",{type:"submit"},"Submit")))}),v=t(24),p=new(t(22).Socket)("ws://".concat("defiant-blueviolet-greathornedowl.gigalixirapp.com","/socket"),{params:{user_token:"user_token_test"}});p.connect();var h=function(e,n){return p.channel(e,{name:n})},E=function(e){return e.disconnect()},_=function(e){return new Promise((function(n,t){e.join().receive("ok",(function(e){n(e)})).receive("error",(function(e){t?t(e):console.log("Unable to join on channel",e)})).receive("timeout",(function(e){return t?t(e):console.log("Networking issue. Still waiting...")}))}))},j=function(e,n,t){return e.on(n,t)},O=function(e,n,t){return new Promise((function(a,r){e.push(n,t).receive("ok",a).receive("error",r)}))},S=function(){var e=new Date;return"".concat(e.getHours(),": ").concat(e.getMinutes(),": ").concat(e.getSeconds())},w=function(e){return 0===e.id},y=function(e,n){return e.id===n.id},N=function(e,n){return n.filter((function(n){return!y(n.user,e)&&!w(n.user)}))},k=function(e){var n=e.find((function(e){return w(e.user)}));return(null===n||void 0===n?void 0:n.card)||null},x=function(e,n){var t=n.find((function(n){return y(n.user,e)}));return(null===t||void 0===t?void 0:t.card)||null},M=(t(39),function(e){var n=e.user_name,t=e.text,a=e.time;return r.a.createElement("span",{className:"chat__message"},r.a.createElement("span",{className:"chat__message-label"},"[".concat(a,"]: ").concat(n,":"))," ",r.a.createElement("span",null,"".concat(t)))}),C=function(e){var n=e.messages,t=e.onNewMessage,o=Object(a.useState)(""),c=Object(b.a)(o,2),u=c[0],l=c[1];return Object(a.useEffect)((function(){var e=document.getElementById("messages-container");e&&(e.scrollTop=e.scrollHeight)}),[n]),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(""),t(u)},className:"chat__container"},r.a.createElement("div",{id:"messages-container",className:"chat__messages-container"},n.map((function(e){return r.a.createElement(M,e)}))),r.a.createElement("div",{className:"chat__input-area"},r.a.createElement("input",{value:u,onChange:function(e){var n=e.target.value;return l(n)}}),r.a.createElement("button",{type:"submit"},"Send")))},P=t(23),R=t.n(P),B=(t(40),["Lavender","YellowGreen","Teal","SaddleBrown","Salmon","RebeccaPurple","Red","Magenta"]),D=function(e){return B[e%8]},G=function(e){return e%2===0?"normal":"bold"},I=function(e){return"".concat(e?7+Math.floor(3*Math.random()):14+Math.floor(10*Math.random()),"px")},L=function(e,n){return{color:D(e),fontSize:I(n),transform:"rotate(".concat(90-Math.floor(180*Math.random()),"deg)"),fontWeight:G(e)}},U=function(e){var n=e.card,t=e.onGuess,a=e.small,o=void 0!==a&&a;return r.a.createElement("div",{className:R()("dobble-game-card__container",o&&"dobble-game-card__container--small")},n.map((function(e){return r.a.createElement("button",{key:e,className:"dobble-game-card__button",style:L(e,o),onClick:function(){return t&&t(e)},tabIndex:t?0:-1,disabled:!t},e)})))},H=(t(41),function(e){var n=e.players;return r.a.createElement("div",{className:"game-room__other-players-info"},n.map((function(e){return r.a.createElement("div",{className:"game-room__other-player",key:e.user.id},r.a.createElement(U,{card:e.card,small:!0}),r.a.createElement("span",null,e.user.name))})))}),J=function(e){var n=e.location.search,t=new URLSearchParams(n),o=t.get("name")||"Anonymous",c=t.get("room"),u=Object(a.useState)(h("room:".concat(c),o)),l=Object(b.a)(u,1)[0],i=Object(a.useState)(null),s=Object(b.a)(i,2),m=s[0],f=s[1],d=Object(a.useState)([]),g=Object(b.a)(d,2),p=g[0],w=g[1],y=Object(a.useState)([]),M=Object(b.a)(y,2),P=M[0],R=M[1],B=Object(a.useRef)(P);Object(a.useEffect)((function(){B.current=P}),[P]);var D=function(e){!function(e,n){R([].concat(Object(v.a)(B.current),[{user_name:e,text:n,time:S()}]))}(e.user_name,e.text)},G=function(e){var n=e.game_state;console.log(n),w(n)};Object(a.useEffect)((function(){return j(l,"message",D),j(l,"game_state_update",G),l.onError((function(){console.log("there was an error with the connection!")})),_(l).then((function(e){var n=e.id;return f(n)})),function(){E(l)}}),[]);var I=m&&x({id:m,name:o},p),L=k(p),J=m?N({id:m,name:o},p):[];return r.a.createElement("div",{className:"game-room"},r.a.createElement(H,{players:J}),I&&L&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{card:L,onGuess:function(e){O(l,"guess",{number:e}).then((function(e){"right"===e.response?console.log("top\xea\xea\xea"):console.log("vc \xe9 meio burro n\xe9?")}))}}),r.a.createElement(U,{card:I})),r.a.createElement("div",{className:"game-room__chat"},r.a.createElement(C,{messages:P,onNewMessage:function(e){O(l,"message",{text:e})}})))},T=function(e){function n(){return Object(c.a)(this,n),Object(l.a)(this,Object(i.a)(n).apply(this,arguments))}return Object(s.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return a.createElement(m.a,null,a.createElement(f.c,null,a.createElement(f.a,{exact:!0,path:"/",component:g}),a.createElement(f.a,{exact:!0,path:"/dobble",component:J})))}}]),n}(a.Component);t(42);o.render(a.createElement(T,null),document.getElementById("definitely-not-dobble-root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.4b7c285d.chunk.js.map